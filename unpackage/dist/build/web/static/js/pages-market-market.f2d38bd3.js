(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-market-market"],{"0a5c":function(e,t,n){"use strict";n("6a54");var i=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("bf0f"),n("f3f7"),n("18f7"),n("de6c"),n("80e3"),n("4db2"),n("c976"),n("4d8f"),n("7b97"),n("668a"),n("c5b7"),n("8ff5"),n("2378"),n("641a"),n("64e0"),n("cce3"),n("efba"),n("d009"),n("bd7d"),n("7edd"),n("d798"),n("f547"),n("5e54"),n("b60a"),n("8c18"),n("12973"),n("f991"),n("198e"),n("8557"),n("63b1"),n("1954"),n("1cf1"),n("c223"),n("d4b5"),n("aa9c"),n("2797"),n("5c47"),n("a1c1");var s=i(n("80b1")),c=i(n("efe5")),a=i(n("c5ee")),o=n("cea1"),r=function(){function e(){(0,s.default)(this,e),this.url="wss://api.huobi.pro/ws",this.ws=null,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectInterval=3e3,this.pendingSubscriptions=[],this.subscribedSymbols=new Set}return(0,c.default)(e,[{key:"connect",value:function(){var e=this;this.ws?console.log("WebSocket is already connected"):(this.ws=uni.connectSocket({url:this.url,success:function(){console.log("WebSocket connection initiated")},fail:function(t){console.error("Failed to initiate WebSocket connection:",t),e.scheduleReconnect()}}),this.ws.onOpen((function(){console.log("WebSocket connection opened"),e.reconnectAttempts=0,o.mutations.setIsConnected(!0),e.heartbeat(),e.processPendingSubscriptions()})),this.ws.onClose((function(t){console.log("WebSocket connection closed",t),e.ws=null,o.mutations.setIsConnected(!1),e.scheduleReconnect()})),this.ws.onError((function(e){console.error("WebSocket error:",e)})),this.ws.onMessage((function(t){if(t.data instanceof ArrayBuffer){var n=a.default.inflate(new Uint8Array(t.data),{to:"string"}),i=JSON.parse(n);i.ping?e.handlePing(i.ping):i.ch&&e.handlePriceUpdate(i)}})))}},{key:"handlePing",value:function(e){this.send({pong:e})}},{key:"heartbeat",value:function(){var e=this;setInterval((function(){e.ws&&1===e.ws.readyState&&e.send({ping:Date.now()})}),5e3)}},{key:"scheduleReconnect",value:function(){var e=this;this.reconnectAttempts<this.maxReconnectAttempts?(this.reconnectAttempts++,console.log("Attempting to reconnect (".concat(this.reconnectAttempts,"/").concat(this.maxReconnectAttempts,")...")),setTimeout((function(){return e.connect()}),this.reconnectInterval)):console.error("Max reconnect attempts reached. Please check your connection and restart the app.")}},{key:"send",value:function(e){this.ws?this.ws.send({data:JSON.stringify(e),success:function(){},fail:function(e){console.error("Failed to send message:",e)}}):console.error("WebSocket is not connected")}},{key:"subscribe",value:function(e){var t="market.".concat(e,".ticker");this.subscribedSymbols.has(e)||(this.subscribedSymbols.add(e),this.ws&&1===this.ws.readyState?this.send({sub:t,id:Date.now()}):this.pendingSubscriptions.push(t))}},{key:"processPendingSubscriptions",value:function(){var e=this;this.pendingSubscriptions.forEach((function(t){e.send({sub:t,id:Date.now()})})),this.pendingSubscriptions=[]}},{key:"handlePriceUpdate",value:function(e){var t=e.ch.split(".")[1],n=t.replace("usdt","").toUpperCase()+"/USDT",i=e.tick.close,s=e.tick.open||i;o.mutations.updatePrice(n,i.toFixed(2));var c=(i-s)/s*100;o.mutations.updatePriceChange(n,c.toFixed(2))}},{key:"unsubscribe",value:function(e){var t="market.".concat(e,".ticker");this.subscribedSymbols.delete(e),this.ws&&1===this.ws.readyState&&this.send({unsub:t,id:Date.now()})}},{key:"close",value:function(){this.ws&&this.ws.close({success:function(){console.log("WebSocket closed successfully")},fail:function(e){console.error("Failed to close WebSocket:",e)}})}}]),e}(),u=new r,d=u;t.default=d},"1e6e":function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"content"},[n("market-list",{on:{"item-click":function(t){arguments[0]=t=e.$handleEvent(t),e.onMarketSelect.apply(void 0,arguments)}}})],1)},s=[]},2093:function(e,t,n){"use strict";n.r(t);var i=n("b893"),s=n("b838");for(var c in s)["default"].indexOf(c)<0&&function(e){n.d(t,e,(function(){return s[e]}))}(c);n("ad68");var a=n("828b"),o=Object(a["a"])(s["default"],i["b"],i["c"],!1,null,"6d028e98",null,!1,i["a"],void 0);t["default"]=o.exports},"42e1":function(e,t,n){"use strict";n.r(t);var i=n("f15b"),s=n.n(i);for(var c in i)["default"].indexOf(c)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(c);t["default"]=s.a},"431d":function(e,t,n){"use strict";n.r(t);var i=n("1e6e"),s=n("42e1");for(var c in s)["default"].indexOf(c)<0&&function(e){n.d(t,e,(function(){return s[e]}))}(c);var a=n("828b"),o=Object(a["a"])(s["default"],i["b"],i["c"],!1,null,"1d9969ba",null,!1,i["a"],void 0);t["default"]=o.exports},"53f7":function(e,t,n){"use strict";var i=n("7658"),s=n("57e7");i("Set",(function(e){return function(){return e(this,arguments.length?arguments[0]:void 0)}}),s)},8775:function(e,t,n){var i=n("c86c");t=i(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */\r\n/* uni.scss */\r\n/* uni.scss */.text-primary[data-v-6d028e98]{color:#fff}.text-secondary[data-v-6d028e98]{color:#666}.text-placeholder[data-v-6d028e98]{color:#999}.font-small[data-v-6d028e98]{font-size:%?24?%}.font-base[data-v-6d028e98]{font-size:%?28?%}.font-medium[data-v-6d028e98]{font-size:%?32?%}.font-large[data-v-6d028e98]{font-size:%?36?%}.font-bold[data-v-6d028e98]{font-weight:700}\r\n/* 主题颜色变量 */.market-list[data-v-6d028e98]{background-color:#1c1c1e;padding:0 %?30?%;width:98%;margin-left:1%;margin-right:1%}.market-list .header[data-v-6d028e98]{display:flex;height:%?80?%;align-items:center;font-size:%?24?%;color:#8f8f8f}.market-list .list-item[data-v-6d028e98]{display:flex;height:%?120?%;align-items:center;border-top:%?2?% solid #2c2c2e}.market-list .col[data-v-6d028e98]{padding:10px;flex:1}.market-list .col.trading-pair[data-v-6d028e98]{flex:1.5;display:flex;align-items:center}.market-list .col.price[data-v-6d028e98]{text-align:left;padding-right:%?40?%}.market-list .col.change[data-v-6d028e98]{text-align:right}.market-list .coin-icon[data-v-6d028e98]{width:%?50?%;height:%?50?%;margin-right:%?20?%}.market-list .pair-name[data-v-6d028e98]{color:#fff;font-size:%?28?%}.market-list .price[data-v-6d028e98]{color:#fff;font-size:%?28?%}.market-list .change-text[data-v-6d028e98]{padding:%?8?% %?20?%;border-radius:%?8?%;font-size:%?24?%}.market-list .change-text.positive[data-v-6d028e98]{background-color:rgba(76,175,80,.1);color:#4caf50}.market-list .change-text.negative[data-v-6d028e98]{background-color:rgba(244,67,54,.1);color:#f44336}',""]),e.exports=t},"994f":function(e,t,n){"use strict";n("6a54");var i=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,n("5c47"),n("a1c1"),n("bf0f"),n("2797");var s=n("cea1"),c=i(n("0a5c")),a={name:"MarketList",data:function(){return{symbols:["btcusdt","suiusdt","bchusdt","bsvusdt","dogeusdt","linkusdt","eosusdt","adausdt","trxusdt"]}},computed:{prices:function(){return s.store.prices},priceChanges:function(){return s.store.priceChanges},isConnected:function(){return s.store.isConnected}},mounted:function(){this.subscribeToSymbols(),this.isConnected||c.default.connect()},methods:{getIconUrl:function(e){var t=e.replace("/USDT","").toLowerCase();return"https://huobicfg.s3.amazonaws.com/currency_icon/".concat(t,".png")},subscribeToSymbols:function(){this.symbols.forEach((function(e){c.default.subscribe(e)}))},handleItemClick:function(e){this.$emit("item-click",e)},handlePriceUpdate:function(e){console.log(e);var t=e.ch.split(".")[1],n=e.tick.close,i=e.tick.open;this.$set(this.prices,t.toUpperCase(),n.toFixed(2));var s=(n-i)/i*100;this.$set(this.priceChanges,t.toUpperCase(),s.toFixed(2))}},beforeDestroy:function(){}};t.default=a},"9a7b":function(e,t,n){var i=n("8775");i.__esModule&&(i=i.default),"string"===typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);var s=n("967d").default;s("30a43d10",i,!0,{sourceMap:!1,shadowMode:!1})},ad68:function(e,t,n){"use strict";var i=n("9a7b"),s=n.n(i);s.a},b838:function(e,t,n){"use strict";n.r(t);var i=n("994f"),s=n.n(i);for(var c in i)["default"].indexOf(c)<0&&function(e){n.d(t,e,(function(){return i[e]}))}(c);t["default"]=s.a},b893:function(e,t,n){"use strict";n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return s})),n.d(t,"a",(function(){}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"market-list"},[n("v-uni-view",{staticClass:"header"},[n("v-uni-text",{staticClass:"col trading-pair"},[e._v("交易对")]),n("v-uni-text",{staticClass:"col price"},[e._v("最新价格")]),n("v-uni-text",{staticClass:"col change"},[e._v("24h涨跌幅")])],1),n("v-uni-view",{staticClass:"list"},e._l(e.prices,(function(t,i){return n("v-uni-view",{key:i,staticClass:"list-item",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.handleItemClick(i)}}},[n("v-uni-view",{staticClass:"col trading-pair"},[n("v-uni-image",{staticClass:"coin-icon",attrs:{src:e.getIconUrl(i),mode:"aspectFit"}}),n("v-uni-text",{staticClass:"pair-name"},[e._v(e._s(i))])],1),n("v-uni-view",{staticClass:"col price"},[n("v-uni-text",[e._v(e._s(t))])],1),n("v-uni-view",{staticClass:"col change"},[n("v-uni-text",{class:["change-text",e.priceChanges[i]>=0?"positive":"negative"]},[e._v(e._s(e.priceChanges[i]>=0?"+":"")+e._s(e.priceChanges[i])+"%")])],1)],1)})),1)],1)},s=[]},cea1:function(e,t,n){"use strict";n("6a54");var i=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.store=t.mutations=void 0;var s=i(n("9b8e")),c=s.default.observable({prices:{},priceChanges:{},isConnected:!1});t.store=c;var a={setPrices:function(e){c.prices=e},setPriceChanges:function(e){c.priceChanges=e},setIsConnected:function(e){c.isConnected=e},updatePrice:function(e,t){s.default.set(c.prices,e,t)},updatePriceChange:function(e,t){s.default.set(c.priceChanges,e,t)}};t.mutations=a},f15b:function(e,t,n){"use strict";n("6a54");var i=n("f5bd").default;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var s=i(n("2093")),c={components:{MarketList:s.default},data:function(){return{}},methods:{onMarketSelect:function(e){console.log("Selected market:",e)}}};t.default=c},f3f7:function(e,t,n){"use strict";n("53f7")}}]);